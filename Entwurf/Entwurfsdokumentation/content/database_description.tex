\newpage
\tikzstyle{num}=[fill = green!10]
\tikzstyle{enum}=[fill = yellow!10]
\tikzstyle{bool}=[fill = blue!10]

\section{Datenbankbeschreibung}
Die Produktdaten werden in zwei getrennten Datenbanken gespeichert, eine Datenbank für Moduldaten und eine für Nutzerdaten. Dies ermöglicht es, in Zukunft eine andere Schnittstelle zum Modulhandbuch zu verwenden, wie beispielsweise eine Anbindung an das Vorlesungsverzeichnis. \\
Im Folgenden wird deshalb der Aufbau beider Datenbanken getrennt beschrieben. Zusätzliche Informationen, die nicht aus den Entity-Relationship-Diagrammen hervorgehen, sind in Form von Kommentaren dargestellt. Die Datentypen der Attribute gehen aus folgender Farbkodierung hervor: \\
\begin{table}[h]
	\centering
	\begin{tabular}{ |l | c |}
		\hline
		Integer-Ganzzahl &\tikz[baseline=-0.5ex]{\node[attribute, num]{}} \\ \hline
		Zeichenkette & \tikz[baseline=-0.5ex]{\node[attribute]{}} \\ \hline
		Boolean-Wert & \tikz[baseline=-0.5ex]{\node[attribute, bool]{}} \\ \hline
		Enum &\tikz[baseline=-0.5ex]{\node[attribute, enum]{}} \\ \hline
	\end{tabular}
	\caption{Farbkodierung der Attribute}
\end{table}

\subsection{Moduldaten}
Ein Modul besitzt zwei eindeutige Schlüssel. Als Primärschlüssel besitzt es eine fortlaufend nummerierte numerische ID. Zusätzlich wird ein \texttt{varchar} \texttt{identifier} gespeichert, der nicht fortlaufend nummeriert ist und den die REST-Schnittstellen für den Modulzugriff verwenden. Hierdurch wird sichergestellt, dass ein Nutzer nicht einfach durch \enquote{probieren} auf beliebige Module zugreifen kann.
\begin{figure}[H]
	\input{content/diagrams/module_data_er}
	\caption{ER-Diagramm Moduldaten}
\end{figure}
\subsubsection{Enumwerte}
\begin{tabular}{|l|l|}
	\hline
	\textbf{Tabellenspalte} & \textbf{mögliche Werte} \\ \hline
	\texttt{cycle\_type} & winter\_term, summer\_term, both \\ \hline
\end{tabular}
\subsection{Benutzerdaten}
Die Entität \texttt{user} besitzt zwei eindeutige Schlüssel. Als Primärschlüssel besitzt ein \texttt{user} eine \texttt{user\_id}. Des Weiteren ist auch das Attribut \texttt{name} eindeutig.
Ein Plan ist eindeutig über seine \texttt{plan\_id}, sowie über seinen \texttt{identifier} ansprechbar. Da die REST-Schnittstelle zum Zugriff den \texttt{identifier} verwendet, wird sichergestellt, dass nicht durch \enquote{probieren} auf einen beliebigen Plan zugegriffen werden kann.
\begin{figure}[H]
	\input{content/diagrams/user_data_er}
	\caption{ER-Diagramm Benutzerdaten}
	\label{fig:user-er}
\end{figure}
\begin{figure}[H]
	\input{content/diagrams/auth_data_er}
	\caption{ER-Diagramm Authentifizierungsdaten}
	\label{fig:auth-er}
\end{figure}

Eine Beschreibung Attribute aus Abbildung~\ref{fig:auth-er} findet sich in Kapitel~\ref{subsec:api-auth}.
\subsubsection{Enumwerte}
\begin{table}[h]
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Tabellenspalte} & \textbf{mögliche Werte} \\ \hline
		\texttt{preference\_type} & positive, negative \\ \hline
		\texttt{state} & not\_verified, valid, invalid \\ \hline
		\texttt{semester\_type} & winter\_term, summer\_term \\ \hline
	\end{tabular}
\end{table}

\subsection{Login-Daten}
Die für den rudimentären, im Paket \texttt{server.rest.authorization.endpoint} implementierten Identiy Provider benötigten Daten werden in der Benutzerdatenbank in der Tabelle \texttt{login\_information} gespeichert. Diese besitzt die Spalten \texttt{id} (Primärschlüssel), \texttt{username} und \texttt{password}.